<script>
  // Math.random() determines computer choice
  function computerPlay() {
    const validSelection = ['ROCK', 'PAPER', 'SCISSORS'];
    return validSelection[Math.floor(Math.random() * validSelection.length)];
  }

  function getSelection() {
    const validSelection = ['ROCK', 'PAPER', 'SCISSORS'];
    let playerSelection = prompt("Enter your selection - Rock, Paper or Scissors!").toUpperCase();
    const computerSelection = computerPlay();
    while (!validSelection.includes(playerSelection)) {
      alert("Please enter a valid answer!");
      playerSelection = prompt("Enter your selection - Rock, Paper or Scissors!").toUpperCase();
    }

    console.log("Player chose: " + playerSelection + "\n" + "Computer chose: " + computerSelection);
    return [playerSelection, computerSelection];
  }

  function getScore(playerSelection, computerSelection, playerScore, computerScore) {
    // Computer scoring
    if ((playerSelection === 'ROCK') && (computerSelection === 'PAPER')) {
      computerScore++;
    } else if ((playerSelection === 'PAPER') && (computerSelection === 'SCISSORS')) {
      computerScore++;
    } else if ((playerSelection === 'SCISSORS') && (computerSelection === 'ROCK')) {
      computerScore++;
    }

    // If both playerSelection and computerSelection is the same
    else if ((playerSelection === 'PAPER') && (computerSelection === 'PAPER')) {
      console.log("NO WINNERS HERE!");
    } else if ((playerSelection === 'ROCK') && (computerSelection === 'ROCK')) {
      console.log("NO WINNERS HERE!");
    } else if ((playerSelection === 'SCISSORS') && (computerSelection === 'SCISSORS')) {
      console.log("NO WINNERS HERE!");
    } else {
      playerScore++; // otherwise increment the playerScore by 1
    }

    return [playerScore, computerScore];
  }

  function displayScore(playerScore, computerScore) {
    console.log(`Player score: ${playerScore}\nComputer score: ${computerScore}`);
  }

  function playAgain() {
    let choice = prompt("Do you want to play again? y/n");
    return choice;
  }


  // Keep playing until someone reaches a score of 5
  function playGame() {
    do {
      let playerScore = 0;
      let computerScore = 0;
      while ((playerScore < 5) && (computerScore < 5)) {
        let selection = getSelection();
        let playerSelection = selection[0];
        let computerSelection = selection[1];
        let score = getScore(playerSelection, computerSelection, playerScore, computerScore);
        playerScore = score[0];
        computerScore = score[1];
        displayScore(playerScore, computerScore);
        if (playerScore === 5) {
          console.log("Congratulations! You win");

        } else if (computerScore === 5) {
          console.log("You lost to the computer, FeelsBadMan");
        }
      }

    } while (playAgain().toLowerCase() == 'y');
  }

  //Call playGame function
  playGame();
</script>